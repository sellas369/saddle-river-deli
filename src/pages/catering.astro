---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Catering from '../components/Catering.svelte';
import Buffet from '../components/Buffet.svelte';
import { getEntry } from 'astro:content';

const catering = (await getCollection('catering'))
  .sort((a, b) => a.data.title.localeCompare(b.data.title))
  .sort((a, b) => {
    if (a.data.weight < b.data.weight) return -1;
    if (a.data.weight > b.data.weight) return 1;
    return 0;
  });

const buffet = await getEntry('buffet', 'buffet');
const menu = await getEntry('pages', 'catering');
---

<Layout title={menu?.data.title}>
  <div set:html={menu?.rendered.html} />
  {catering.map((c) => <Catering menu={c} />)}
  <Buffet menu={buffet} />
</Layout>

<style lang="scss"></style>
